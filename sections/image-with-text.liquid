{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }

  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }

  #shopify-section-{{ section.id }} {
    {%- if section.settings.section_bg_color != blank -%}
      background-color: {{ section.settings.section_bg_color }};
    {%- endif -%}
    position: relative;
    overflow: hidden;
  }
{%- endstyle -%}

<div
  class="image-with-text-section section-{{ section.id }}-padding {% if section.settings.image == blank %}no-image{% endif %}"
  id="ImageWithText-{{ section.id }}"
>
  {%- if section.settings.image_top_left != blank -%}
    <div class="image-with-text__image-top-left">
      {{
        section.settings.image_top_left
        | image_url: width: 600
        | image_tag: loading: 'lazy', alt: section.settings.image_top_left.alt
        | default: 'Image'
      }}
    </div>
  {%- endif -%}

  {%- if section.settings.image_top_right != blank -%}
    <div class="image-with-text__image-top-right">
      {{
        section.settings.image_top_right
        | image_url: width: 600
        | image_tag: loading: 'lazy', alt: section.settings.image_top_right.alt
        | default: 'Image'
      }}
    </div>
  {%- endif -%}

  <div class="page-width">
    <div class="image-with-text__content">
      {%- if section.settings.image != blank -%}
        <div class="image-with-text__image-block">
          {{
            section.settings.image
            | image_url: width: 1200
            | image_tag: loading: 'lazy', alt: section.settings.image.alt
            | default: 'Image'
          }}
          {%- if section.settings.image_overlay != blank -%}
            <div class="image-with-text__image-overlay">
              {{
                section.settings.image_overlay
                | image_url: width: 1200
                | image_tag: loading: 'lazy', alt: section.settings.image_overlay.alt
                | default: 'Image'
              }}
            </div>
          {%- endif -%}
        </div>
      {%- endif -%}

      <div class="image-with-text__content-inner">
        {%- for block in section.blocks -%}
          {%- case block.type -%}
            {%- when 'title' -%}
              <h2 class="image-with-text__title" {{ block.shopify_attributes }}>
                {{ block.settings.title }}
              </h2>
            {%- when 'textbox' -%}
              <div
                class="image-with-text__textbox rte"
                {% if block.settings.accent_color != blank %}
                  style="--accent-color: {{ block.settings.accent_color }};"
                {% endif %}
                {{ block.shopify_attributes }}
              >
                {{ block.settings.textbox }}
              </div>
            {%- when 'list_item' -%}
              <div class="image-with-text__list-item" {{ block.shopify_attributes }}>
                {%- if block.settings.icon != blank -%}
                  <div class="image-with-text__list-item-icon">
                    {{
                      block.settings.icon
                      | image_url: width: 100
                      | image_tag: loading: 'lazy', alt: block.settings.icon.alt
                      | default: 'Icon'
                    }}
                  </div>
                {%- endif -%}
                <div class="image-with-text__list-item-content">
                  {%- if block.settings.title != blank -%}
                    <h3 class="image-with-text__list-item-title">{{ block.settings.title }}</h3>
                  {%- endif -%}
                  {%- if block.settings.textbox != blank -%}
                    <div class="image-with-text__list-item-textbox rte">{{ block.settings.textbox }}</div>
                  {%- endif -%}
                </div>
              </div>
            {%- when 'buttons' -%}
              <div class="image-with-text__buttons" {{ block.shopify_attributes }}>
                {%- if block.settings.button_label_1 != blank -%}
                  <a
                    {% if block.settings.button_link_1 == blank %}
                      role="link" aria-disabled="true"
                    {% else %}
                      href="{{ block.settings.button_link_1 }}"
                    {% endif %}
                    class="button {{ block.settings.button_class_1 }}"
                  >
                    {{- block.settings.button_label_1 | escape -}}
                  </a>
                {%- endif -%}
                {%- if block.settings.button_label_2 != blank -%}
                  <a
                    {% if block.settings.button_link_2 == blank %}
                      role="link" aria-disabled="true"
                    {% else %}
                      href="{{ block.settings.button_link_2 }}"
                    {% endif %}
                    class="button {{ block.settings.button_class_2 }}"
                  >
                    {{- block.settings.button_label_2 | escape -}}
                  </a>
                {%- endif -%}
                {%- if block.settings.button_label_3 != blank -%}
                  <a
                    {% if block.settings.button_link_3 == blank %}
                      role="link" aria-disabled="true"
                    {% else %}
                      href="{{ block.settings.button_link_3 }}"
                    {% endif %}
                    class="button {{ block.settings.button_class_3 }}"
                  >
                    {{- block.settings.button_label_3 | escape -}}
                  </a>
                {%- endif -%}
              </div>
          {%- endcase -%}
        {%- endfor -%}
      </div>
    </div>
  </div>
  {%- if section.settings.image_bottom_left != blank -%}
    <div class="image-with-text__image-bottom-left">
      {{
        section.settings.image_bottom_left
        | image_url: width: 600
        | image_tag: loading: 'lazy', alt: section.settings.image_bottom_left.alt
        | default: 'Image'
      }}
    </div>
  {%- endif -%}

  {%- if section.settings.image_bottom_right != blank -%}
    <div class="image-with-text__image-bottom-right">
      {{
        section.settings.image_bottom_right
        | image_url: width: 600
        | image_tag: loading: 'lazy', alt: section.settings.image_bottom_right.alt
        | default: 'Image'
      }}
    </div>
  {%- endif -%}
</div>

{% schema %}
{
  "name": "Image with Text",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "header",
      "content": "Images"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image"
    },
    {
      "type": "image_picker",
      "id": "image_overlay",
      "label": "Image overlay"
    },
    {
      "type": "header",
      "content": "Background"
    },
    {
      "type": "color",
      "id": "section_bg_color",
      "label": "Section background color"
    },
    {
      "type": "header",
      "content": "Decorative Images"
    },
    {
      "type": "image_picker",
      "id": "image_top_left",
      "label": "Image top left"
    },
    {
      "type": "image_picker",
      "id": "image_top_right",
      "label": "Image top right"
    },
    {
      "type": "image_picker",
      "id": "image_bottom_left",
      "label": "Image bottom left"
    },
    {
      "type": "image_picker",
      "id": "image_bottom_right",
      "label": "Image bottom right"
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding top",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding bottom",
      "default": 36
    }
  ],
  "blocks": [
    {
      "type": "title",
      "name": "Title",
      "limit": 1,
      "settings": [
        {
          "type": "html",
          "id": "title",
          "label": "Title"
        }
      ]
    },
    {
      "type": "textbox",
      "name": "Textbox",
      "limit": 2,
      "settings": [
        {
          "type": "richtext",
          "id": "textbox",
          "label": "Textbox"
        },
        {
          "type": "color",
          "id": "accent_color",
          "label": "Accent color"
        }
      ]
    },
    {
      "type": "list_item",
      "name": "List Item",
      "settings": [
        {
          "type": "image_picker",
          "id": "icon",
          "label": "Icon"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title"
        },
        {
          "type": "richtext",
          "id": "textbox",
          "label": "Textbox"
        }
      ]
    },
    {
      "type": "buttons",
      "name": "Buttons",
      "limit": 1,
      "settings": [
        {
          "type": "header",
          "content": "Button 1"
        },
        {
          "type": "text",
          "id": "button_label_1",
          "label": "Button 1 label"
        },
        {
          "type": "url",
          "id": "button_link_1",
          "label": "Button 1 link"
        },
        {
          "type": "text",
          "id": "button_class_1",
          "label": "Button 1 custom class",
          "info": "Add custom CSS classes (e.g., 'button--orange', 'button--secondary')"
        },
        {
          "type": "header",
          "content": "Button 2"
        },
        {
          "type": "text",
          "id": "button_label_2",
          "label": "Button 2 label"
        },
        {
          "type": "url",
          "id": "button_link_2",
          "label": "Button 2 link"
        },
        {
          "type": "text",
          "id": "button_class_2",
          "label": "Button 2 custom class",
          "info": "Add custom CSS classes (e.g., 'button--orange', 'button--secondary')"
        },
        {
          "type": "header",
          "content": "Button 3"
        },
        {
          "type": "text",
          "id": "button_label_3",
          "label": "Button 3 label"
        },
        {
          "type": "url",
          "id": "button_link_3",
          "label": "Button 3 link"
        },
        {
          "type": "text",
          "id": "button_class_3",
          "label": "Button 3 custom class",
          "info": "Add custom CSS classes (e.g., 'button--orange', 'button--secondary')"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Image with Text",
      "blocks": [
        {
          "type": "title"
        },
        {
          "type": "textbox"
        },
        {
          "type": "buttons"
        }
      ]
    }
  ]
}
{% endschema %}
